# Plan 02-10: Workout Screen Architecture

## Metadata
```yaml
wave: 5
depends_on: [02-08, 02-06]
files_modified:
  - index.html
  - css/style.css
  - js/app.js
autonomous: false
gap_closure: true
```

## Goal
Separate workout logging into a dedicated full-screen view, with mini-player for navigation while workout active.

## Context
UAT feedback revealed major architecture mismatch:
- **Current**: Workout logging embedded in Today/dashboard view
- **Expected**: Workout as separate full-screen takeover

**Target Architecture:**
1. **Dashboard (Today)** = Stats only (streak, volume, PRs) - NO workout logging
2. **Workout Screen** = Full-screen takeover when workout active
3. **Mini-Player** = Floating bar when minimized, shows timer + exercise + progress

## Tasks

<task id="1">
Create workout-view section in index.html:
- Add new `<section id="workout-view" class="view workout-fullscreen">` after today-view
- Header: minimize button (↓), workout name input, finish button (checkmark)
- Timer hero: large elapsed time display
- Exercise list container (move structure from today-view)
- Action buttons: Add Set, Add Exercise, Finish Workout at bottom
- Initially hidden (not in nav)
</task>

<task id="2">
Add workout screen CSS:
- `.workout-fullscreen` takes full viewport, hides bottom nav
- `.workout-header` with minimize/finish buttons
- `.workout-timer-hero` with large timer display
- `.workout-actions` fixed at bottom with buttons
- Smooth slide-up animation when opening
- z-index: 500 (above content, below numpad/modals)
</task>

<task id="3">
Refactor app.js workout flow:
- `openWorkoutScreen()` - show workout view, hide nav, start timer
- `minimizeWorkout()` - collapse to mini-player, show nav
- `expandWorkout()` - return from mini-player to workout screen
- Move exercise rendering to workout screen
- Update `startWorkout()` to call `openWorkoutScreen()`
- Update `finishWorkout()` with confirmation, cleanup, return to dashboard
</task>

<task id="4">
Enhance mini-player content and behavior:
- Show: Timer + Current exercise name + Progress (e.g., "3/5 sets") + Workout name
- Floating position above everything (z-index: 150)
- Tap anywhere on mini-player expands to workout screen
- Smooth slide-up/down animations
- Only visible when workout active AND not on workout screen
</task>

<task id="5" type="checkpoint:human-verify">
TEST: Full workout flow:
1. From dashboard, tap FAB/Start Workout
2. Verify: Full-screen workout opens, nav hidden, timer starts
3. Add an exercise, log a set with numpad
4. Tap minimize button (↓)
5. Verify: Mini-player appears floating, nav visible, can navigate
6. Tap mini-player
7. Verify: Returns to full workout screen
8. Tap Finish Workout (bottom OR header)
9. Verify: Confirmation dialog, then returns to dashboard
</task>

## Verification
```bash
grep -q "workout-fullscreen" css/style.css && echo "✓ Workout fullscreen CSS exists"
grep -q "openWorkoutScreen\|minimizeWorkout" js/app.js && echo "✓ Workout flow functions exist"
grep -q 'id="workout-view"' index.html && echo "✓ Workout view HTML exists"
```

## Must Haves
- [ ] Workout is separate full-screen view (not embedded in Today)
- [ ] Dashboard shows stats only when no active workout
- [ ] Minimize button collapses to mini-player
- [ ] Mini-player shows timer + exercise + progress
- [ ] Tap mini-player expands to workout screen
- [ ] Finish button with confirmation ends workout
- [ ] Smooth animations on all transitions

## Addresses
- UAT-001: Workout separate screen architecture
- UAT-005: Finish workout functionality
