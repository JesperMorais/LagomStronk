---
phase: 06-gamification-intelligence
plan: 01
type: execute
---

<objective>
Create onboarding flow that captures user profile (goals, experience, preferences, equipment) to personalize all intelligence features.

Purpose: Without knowing who the user is, all recommendations are generic. Onboarding is the foundation for INTL-02 through INTL-10.
Output: Multi-step onboarding wizard, user profile stored in data model, profile accessible from settings.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-gamification-intelligence/06-CONTEXT.md

# Key files:
@js/data.js
@js/app.js
@index.html
@css/style.css

**Tech stack available:** Chart.js, canvas-confetti, idb-keyval, localStorage data layer
**Established patterns:** Multi-step wizard (02-09 custom exercise wizard), chip-based selection, modal overlays, event delegation
**Constraining decisions:**
- Phase 2: Chip-based selection pattern for multi-select (muscle groups, equipment)
- Phase 2: Modal/wizard overlay pattern with step indicators
- All data stored via loadData/saveData to localStorage (data.js pattern)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add user profile data model and storage</name>
  <files>js/data.js</files>
  <action>
Add `userProfile` to the data model in getDefaultData() and loadData() migration:

```
userProfile: {
  goals: [],           // ['strength', 'hypertrophy', 'endurance', 'weight_loss', 'general_fitness']
  experience: null,    // 'beginner' | 'intermediate' | 'advanced'
  trainingDays: 3,     // target days per week (1-7)
  equipment: [],       // ['barbell', 'dumbbell', 'machine', 'cable', 'bodyweight', 'kettlebell']
  onboardingComplete: false,
  createdAt: null       // ISO date string when profile was created
}
```

Add helper functions:
- `getUserProfile(data)` — returns userProfile or default
- `saveUserProfile(data, profile)` — validates and saves profile to data
- `isOnboardingComplete(data)` — checks if user completed onboarding

Ensure loadData() migrates old data by adding `userProfile` with defaults if missing (same pattern as bodyTracking migration on line 319-321).
  </action>
  <verify>Load app in browser, open console, verify `loadData().userProfile` returns default object with all fields</verify>
  <done>userProfile exists in data model with all fields, helper functions exported, loadData migration handles missing userProfile</done>
</task>

<task type="auto">
  <name>Task 2: Build onboarding wizard UI</name>
  <files>index.html, css/style.css, js/app.js</files>
  <action>
Create a 4-step onboarding wizard that shows on first app launch (when `isOnboardingComplete(data)` returns false):

**Step 1 — Goals:** "What are your training goals?" Chip-select (multi). Options: Strength, Hypertrophy, Endurance, Weight Loss, General Fitness. Use same chip pattern as exercise wizard (02-09).

**Step 2 — Experience:** "How long have you been lifting?" Single-select cards. Beginner (< 6 months), Intermediate (6 months - 2 years), Advanced (2+ years). Each with brief description.

**Step 3 — Training Days:** "How many days per week do you train?" Horizontal number selector 1-7 with current value highlighted. Default 3.

**Step 4 — Equipment:** "What equipment do you have access to?" Chip-select (multi). Options: Barbell, Dumbbell, Machine, Cable, Bodyweight, Kettlebell. Pre-select all.

**Navigation:** Back/Next buttons. Step indicator dots at top. "Skip" link in header (saves defaults). Final step shows "Get Started" button.

**On completion:** Save profile via saveUserProfile(), set onboardingComplete=true, dismiss wizard, render dashboard.

**Accessing later:** Add "Edit Profile" option in a settings area accessible from the Today view (gear icon in header). Clicking reopens the wizard pre-filled with current values.

**Style:** Full-screen overlay (z-index 1000), dark background (#1a1a1a), mint accent (#D1FFC6), same rounded card aesthetic as rest of app.

**What to avoid:** Don't make this blocking after first use — users should be able to skip. Don't add a new nav tab for settings (use gear icon in today view header).
  </action>
  <verify>Open app fresh (clear localStorage), verify onboarding wizard appears. Complete all steps, verify data saves. Reload, verify wizard doesn't reappear. Find gear icon, verify can re-edit profile.</verify>
  <done>Onboarding wizard shows on first launch, captures goals/experience/days/equipment, saves to userProfile, doesn't reappear after completion, editable via settings gear icon</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Onboarding wizard with 4 steps capturing user profile for personalized intelligence</what-built>
  <how-to-verify>
    1. Clear localStorage and reload app
    2. Verify onboarding wizard appears with step indicators
    3. Select goals (multi-select chips), advance
    4. Select experience level, advance
    5. Set training days (try different values), advance
    6. Select equipment (multi-select), click "Get Started"
    7. Verify dashboard loads normally after completion
    8. Reload — verify wizard doesn't reappear
    9. Find settings gear icon on Today view, verify can re-edit profile
    10. Try "Skip" — verify defaults are saved and wizard closes
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `userProfile` field exists in data model with all specified fields
- [ ] loadData() handles migration for data without userProfile
- [ ] Onboarding wizard shows on first launch
- [ ] Profile saves correctly after completion
- [ ] Wizard doesn't reappear after completion
- [ ] Profile editable via settings
- [ ] No console errors
</verification>

<success_criteria>

- User profile data model with goals, experience, training days, equipment
- Onboarding wizard captures all profile data on first launch
- Profile is re-editable from settings
- Data persists across reloads
</success_criteria>

<output>
After completion, create `.planning/phases/06-gamification-intelligence/06-01-SUMMARY.md`
</output>
