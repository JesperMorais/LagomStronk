---
phase: 06-gamification-intelligence
plan: 03
type: execute
---

<objective>
Create dedicated PR feed view celebrating all personal records in a timeline format.

Purpose: PRs are the most motivating training moments — they deserve a dedicated celebration feed, not just inline badges.
Output: PR feed accessible from Progress view, showing all PRs chronologically with exercise name, value, and type.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-gamification-intelligence/06-CONTEXT.md
@.planning/phases/06-gamification-intelligence/06-02-SUMMARY.md

# Key files:
@js/data.js
@js/app.js
@index.html
@css/style.css

**Tech stack available:** Chart.js, canvas-confetti, localStorage data layer
**Established patterns:** PR detection (checkForPR in data.js), PR celebration (03-04), set.pr array storing PR types, getPersonalRecords function
**Constraining decisions:**
- Phase 3: PRs stored in set.pr array (['weight', 'e1rm'])
- Phase 3: getPersonalRecords() returns per-exercise max weight/volume/reps with dates
- Phase 2: Progress view already shows personal records section
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build PR timeline data function</name>
  <files>js/data.js</files>
  <action>
Add `getPRTimeline(data)` function that scans all workouts and builds a chronological timeline of all PR events:

```
returns: [{
  date: '2026-02-09',
  exercise: 'Bench Press',
  type: 'weight',      // 'weight' | 'e1rm'
  value: 100,           // the weight or e1rm value
  unit: 'kg',
  previousBest: 95,     // what the PR beat (null if first)
  improvement: 5        // delta from previous best
}]
```

Implementation: Iterate workouts chronologically. For each exercise/set that has `set.pr` array populated, extract the PR event. To get `previousBest`, track running max per exercise as you iterate forward through time.

Sort results newest first (reverse chronological) for feed display.

Also add `getPRCount(data)` — returns total number of PR events across all workouts (for badge checking in 06-02).
  </action>
  <verify>In console, call getPRTimeline with data containing PR-tagged sets, verify chronological ordering and previousBest values</verify>
  <done>getPRTimeline returns reverse-chronological PR events with improvement deltas, getPRCount returns total PR count</done>
</task>

<task type="auto">
  <name>Task 2: PR feed UI in Progress view</name>
  <files>js/app.js, index.html, css/style.css</files>
  <action>
Add a "PR Feed" section to the Progress view (renderProgressView). Place it prominently — either as a tab within Progress or as the first section before the existing stats.

**Design:** Timeline-style feed:
- Each PR entry: Gold accent left border, exercise name (bold), PR type badge ("Weight PR" or "1RM PR" in mint chip), value with improvement delta ("+5 kg"), date below in muted text
- Group by date with date headers ("Today", "Yesterday", "Feb 7, 2026")
- Empty state: "No PRs yet — keep training and they'll come!" with a trophy icon

**Layout:** Scrollable list, max-height with overflow-auto if in a section, or full-height if tabbed. Use existing card styling (.card class) for each PR entry.

**Performance:** Only render last 50 PRs initially. No infinite scroll needed — users won't have thousands of PRs.

**What to avoid:** Don't replace the existing PR records table (renderPersonalRecords) — that shows current bests. The PR feed shows the HISTORY of achievements. Don't add a new nav tab — integrate into existing Progress view.
  </action>
  <verify>Navigate to Progress view, verify PR Feed section renders with chronological PR events. Verify gold accents, improvement deltas, date grouping. Verify empty state if no PRs.</verify>
  <done>PR feed renders in Progress view with timeline styling, date grouping, improvement deltas, empty state, and last 50 PR limit</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] getPRTimeline returns correct chronological PR data with improvement deltas
- [ ] PR feed section visible in Progress view
- [ ] Each PR shows exercise, type badge, value, improvement, date
- [ ] PRs grouped by date
- [ ] Empty state displays when no PRs exist
- [ ] No console errors
</verification>

<success_criteria>

- PR timeline data function extracts all PR events from workout history
- PR feed displays chronologically with improvement deltas
- Integrates into existing Progress view without replacing current PR table
- Handles empty state gracefully
</success_criteria>

<output>
After completion, create `.planning/phases/06-gamification-intelligence/06-03-SUMMARY.md`
</output>
