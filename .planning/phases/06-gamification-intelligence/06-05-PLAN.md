---
phase: 06-gamification-intelligence
plan: 05
type: execute
---

<objective>
Build insights dashboard with workout quality scores, trend analysis, and muscle heatmap visualization.

Purpose: Answer "how's my training going?" at a glance ‚Äî the between-sessions intelligence layer.
Output: Quality scores, trend highlights, and muscle heatmap integrated into Progress view.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-gamification-intelligence/06-CONTEXT.md
@.planning/phases/06-gamification-intelligence/06-04-SUMMARY.md

# Key files:
@js/data.js
@js/app.js
@js/charts.js
@index.html
@css/style.css

**Tech stack available:** Chart.js (already imported), canvas-confetti, localStorage data layer
**Established patterns:**
- Chart.js gradient patterns (02-03 volume chart, 04-01 weight chart)
- Progress view with stats sections (renderProgressView, line 1621)
- getMuscleGroupStats() for per-muscle data
- getWeeklySummary() for weekly stats
- getOverallStats() for totals

**Constraining decisions:**
- Phase 2: Chart.js gradient bar/line patterns established
- Phase 4: Non-zero Y-axis for better visibility
- Phase 6 CONTEXT: Insights should answer "how's my training going?" at a glance
- Phase 6-04: Intelligence functions available for data
</context>

<tasks>

<task type="auto">
  <name>Task 1: Workout quality score and trend analysis data functions</name>
  <files>js/data.js</files>
  <action>
**1. getWorkoutQualityScore(data, dateStr)** ‚Äî INTL-07
Score a single workout 0-100 based on:
- Completion rate: (completed sets / total sets) √ó 40 points
- PR achievement: +20 points per PR (max 20)
- Volume vs average: if above weekly average volume for that day's muscle groups, +20 points
- Consistency: if this workout matches the active program schedule, +20 points
Return: `{score: 85, breakdown: {completion: 36, pr: 20, volume: 15, consistency: 14}, label: 'Great'}`
Labels: 0-40 'Needs Work', 41-60 'Solid', 61-80 'Great', 81-100 'Exceptional'

**2. getRecentQualityScores(data, count)** ‚Äî returns last N workout quality scores for chart display
Return: `[{date: '2026-02-09', score: 85, label: 'Great'}, ...]`

**3. getTrendAnalysis(data)** ‚Äî INTL-08
Analyze trends over last 30 days vs previous 30 days:
- Volume change % per exercise ("Bench Press: +15%")
- Frequency change ("Training 4x/week, up from 3x/week")
- Strength trends per muscle group
- Body weight trend (if body tracking data exists)
Return: `{highlights: [{type: 'volume_up', text: 'Bench Press volume up 15% this month', positive: true}, ...], period: '30 days'}`
Limit to top 5 most notable trends.

**4. getWeeklyMuscleHeatmap(data)** ‚Äî INTL-09
For the current week, calculate sets per muscle group:
Return: `[{muscle: 'chest', displayName: 'Chest', sets: 12, intensity: 0.8}, ...]`
Where intensity = sets / max_sets_any_group (normalized 0-1). Muscles with 0 sets get intensity 0.
  </action>
  <verify>In console, test each function. Verify quality score calculation with known workout data. Verify trend analysis compares correct periods. Verify heatmap intensity normalization.</verify>
  <done>Quality score, trend analysis, and heatmap data functions return correct, useful insights from workout data</done>
</task>

<task type="auto">
  <name>Task 2: Insights UI in Progress view</name>
  <files>js/app.js, js/charts.js, index.html, css/style.css</files>
  <action>
Add three insights sections to the Progress view, above the existing stats:

**1. Workout Quality Chart:**
- Small line chart (Chart.js) showing last 10 workout quality scores over time
- Mint gradient fill, y-axis 0-100, date labels on x-axis
- Current average score displayed as large number with label ("78 ‚Äî Great")
- Use same gradient pattern as volume chart (02-03)

**2. Trend Highlights:**
- Card with 3-5 trend items, each with icon and text:
  - üìà green for positive trends
  - üìâ amber for negative trends
  - ‚û°Ô∏è neutral for stable
- Example: "üìà Bench Press volume up 15% this month"
- Empty state: "Train for 30+ days to see trends" (need 30 days of data)

**3. Muscle Heatmap:**
- Visual grid showing muscle groups with color intensity based on weekly training:
  - Full mint (#D1FFC6) = most trained
  - Faded/transparent = least trained
  - Red/amber tint = not trained at all this week
- Layout: Simple grid of muscle group chips/blocks (not an anatomical diagram ‚Äî keep it simple)
- Each block shows muscle name + set count
- Tapping a block could show recent exercises for that muscle (optional, nice-to-have)

**Placement:** Add as the first sections in renderProgressView(), before existing renderOverallStats/renderFrequencyStats. Group under a "This Week" or "Insights" header.

**Minimum data threshold:** Don't show quality chart with <3 workouts. Don't show trends with <30 days of data. Heatmap can show with any data (just shows this week).

**What to avoid:** Don't create a separate view ‚Äî integrate into Progress. Don't use an anatomical body diagram (too complex, would need SVG assets). Keep the heatmap as colored blocks/chips. Don't remove existing Progress sections.
  </action>
  <verify>Navigate to Progress view, verify insights sections appear above existing stats. Check quality chart renders with gradient. Check trend highlights show relevant data. Check muscle heatmap shows colored blocks with set counts. Verify minimum data thresholds.</verify>
  <done>Progress view shows workout quality chart, trend highlights, and muscle heatmap. All sections respect minimum data thresholds. Existing Progress content preserved below insights.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Insights dashboard with workout quality scores, trend analysis, and muscle heatmap in Progress view ‚Äî completing the "how's my training going?" experience</what-built>
  <how-to-verify>
    1. Open Progress view
    2. Verify workout quality chart shows with score average
    3. Verify trend highlights show meaningful trends (or threshold message)
    4. Verify muscle heatmap shows this week's training distribution
    5. Check color coding: most-trained = full mint, untrained = red/amber
    6. Verify existing Progress sections still visible below
    7. Check with minimal data ‚Äî verify thresholds work
    8. Overall: does Progress view now answer "how's my training going?"
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix. Phase 6 complete.</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Quality score function returns 0-100 with breakdown
- [ ] Quality chart renders with Chart.js gradient
- [ ] Trend analysis shows top 5 notable trends
- [ ] Muscle heatmap shows weekly training distribution with color coding
- [ ] Minimum data thresholds enforced
- [ ] Existing Progress sections preserved
- [ ] No console errors
- [ ] Phase 6 complete ‚Äî all GAME and INTL requirements addressed
</verification>

<success_criteria>

- Workout quality scores calculated and charted
- Trend analysis highlights notable changes over 30-day windows
- Muscle heatmap visualizes weekly training distribution
- All integrated into Progress view without replacing existing content
- Phase 6 complete: all 14 requirements (GAME-01 through GAME-04, INTL-01 through INTL-10) addressed across plans 01-05
</success_criteria>

<output>
After completion, create `.planning/phases/06-gamification-intelligence/06-05-SUMMARY.md`:

# Phase 6 Plan 5: Insights Dashboard Summary

**[Substantive one-liner]**

## Accomplishments
## Files Created/Modified
## Decisions Made
## Issues Encountered

## Next Step
Phase 6 complete, ready for Phase 7 (Documentation).
</output>
