---
phase: 03-workout-features
plan: 02
type: execute
---

<objective>
Create program selection UI and dashboard integration for one-tap workout start.

Purpose: Let users pick a program, see today's workout prominently, and start with minimal friction.
Output: Program selection view, program cards, dashboard "Today's Workout" section, one-tap start.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-workout-features/03-CONTEXT.md
@.planning/phases/03-workout-features/03-01-SUMMARY.md

**Design direction from context:**
- Hevy-style program cards: clean, calendar view of the week
- One tap to start today's workout
- Minimal friction
- Forgive and adapt - missed workouts don't break program

**Existing patterns:**
- Library view uses cards with search/filter
- Modal patterns for selection
- FAB starts empty workout
- Dashboard has hero section with streak + stats
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Programs section to Library view</name>
  <files>index.html, css/style.css</files>
  <action>
Add "Programs" section to the Library view (before exercise library):

HTML in #library-view:
```html
<div class="library-section programs-section">
  <div class="section-header">
    <h3>Training Programs</h3>
  </div>
  <div id="programs-list" class="programs-grid">
    <!-- Program cards render here -->
  </div>
</div>
```

CSS for program cards:
```css
.programs-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 12px;
  padding: 0 16px;
}

.program-card {
  background: var(--card-bg);
  border-radius: 12px;
  padding: 16px;
  cursor: pointer;
  border: 2px solid transparent;
  transition: all 0.2s ease;
}

.program-card.active {
  border-color: var(--mint);
  background: rgba(209, 255, 198, 0.1);
}

.program-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.program-card__name {
  font-weight: 600;
  font-size: 14px;
  margin-bottom: 4px;
}

.program-card__meta {
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: 8px;
}

.program-card__progress {
  height: 4px;
  background: var(--bg-secondary);
  border-radius: 2px;
  overflow: hidden;
}

.program-card__progress-fill {
  height: 100%;
  background: var(--mint);
  transition: width 0.3s ease;
}
```

Card shows: program name, days/week, and progress bar if active.
  </action>
  <verify>grep "programs-grid" index.html && grep "program-card" css/style.css</verify>
  <done>Programs section HTML/CSS added to Library view</done>
</task>

<task type="auto">
  <name>Task 2: Add program rendering and selection logic</name>
  <files>js/app.js</files>
  <action>
Add program UI functions:

1. Import new functions from data.js:
   - getPrograms, getProgramById, getActiveProgram, setActiveProgram, endActiveProgram, getProgramProgress

2. renderProgramsList() function:
   - Get all programs and active program
   - Render each as program-card
   - Mark active program with .active class
   - Show progress bar for active program
   - onclick: handleProgramSelect(programId)

3. handleProgramSelect(programId) function:
   - If clicking active program, show confirm dialog to end program
   - If clicking new program, confirm to start
   - Update appData with setActiveProgram or endActiveProgram
   - Re-render programs list
   - Update dashboard

4. Integrate with library view:
   - Call renderProgramsList() in showView('library')
   - Call renderProgramsList() after program changes

Keep it simple - clicking a card starts/ends a program. No complex modals.
  </action>
  <verify>grep "renderProgramsList" js/app.js && grep "handleProgramSelect" js/app.js</verify>
  <done>Program list renders with selection/deselection working</done>
</task>

<task type="auto">
  <name>Task 3: Add "Today's Workout" to dashboard</name>
  <files>index.html, css/style.css, js/app.js</files>
  <action>
Add prominent "Today's Workout" card to dashboard above the stats row:

HTML - Add after hero section, before stats row:
```html
<div id="todays-workout-card" class="todays-workout" style="display: none;">
  <div class="todays-workout__header">
    <span class="todays-workout__label">Today's Workout</span>
    <span class="todays-workout__program"></span>
  </div>
  <h2 class="todays-workout__name">Push Day</h2>
  <div class="todays-workout__preview"></div>
  <button id="start-programmed-workout" class="btn-primary btn-full">
    Start Workout
  </button>
</div>
```

CSS:
```css
.todays-workout {
  background: linear-gradient(135deg, var(--card-bg) 0%, rgba(209, 255, 198, 0.15) 100%);
  border-radius: 16px;
  padding: 20px;
  margin: 16px;
  border: 1px solid var(--mint);
}

.todays-workout__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.todays-workout__label {
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--mint);
  font-weight: 600;
}

.todays-workout__program {
  font-size: 12px;
  color: var(--text-secondary);
}

.todays-workout__name {
  font-size: 24px;
  font-weight: 700;
  margin-bottom: 12px;
}

.todays-workout__preview {
  font-size: 13px;
  color: var(--text-secondary);
  margin-bottom: 16px;
  line-height: 1.4;
}

.btn-full {
  width: 100%;
}
```

JS - renderTodaysWorkout() function:
1. Import getTodaysProgrammedWorkout from data.js
2. Get today's programmed workout
3. If no active program or today is rest day, hide card
4. Otherwise show card with:
   - Program name in header
   - Workout name (e.g., "Push Day")
   - Preview of first 3-4 exercises
5. onclick for Start Workout button:
   - Call startProgrammedWorkout()
   - Apply workout template to today
   - Navigate to workout view
   - Auto-start workout timer

Call renderTodaysWorkout() in updateDashboard() and on app init.
  </action>
  <verify>grep "todays-workout" index.html && grep "renderTodaysWorkout" js/app.js</verify>
  <done>Today's Workout card shows on dashboard with one-tap start</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Program selection in Library and Today's Workout card on Dashboard</what-built>
  <how-to-verify>
    1. Run: python3 -m http.server 8000 (or npx serve)
    2. Visit: http://localhost:8000
    3. Go to Library tab - verify program cards appear
    4. Tap a program card - verify it becomes active (mint border)
    5. Go to Dashboard - verify "Today's Workout" card appears with workout name
    6. Tap "Start Workout" - verify workout view opens with correct exercises
    7. Tap another program in Library - verify you can switch programs
    8. Confirm visual design matches Hevy-style clean cards
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Programs section visible in Library view
- [ ] Program cards show name, days/week, progress for active
- [ ] Clicking program starts it (sets active)
- [ ] Today's Workout card appears on dashboard when program active
- [ ] One-tap start works and opens workout with correct exercises
- [ ] No JavaScript errors in console
</verification>

<success_criteria>
- All tasks completed
- User can select and start a training program
- Today's workout is prominent on dashboard
- One-tap workflow from dashboard to active workout
- Clean, Hevy-style UI for program cards
</success_criteria>

<output>
After completion, create `.planning/phases/03-workout-features/03-02-SUMMARY.md`
</output>
